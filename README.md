# android-final
final project for Android Spring Course Free Uni

MainActivity-ში არსებული WifiP2Pmanager.discoverPeers() -ის მეშვეობით იწყება peer ების ძებნა რის შემდეგაც WifiBroadcastReceiver-ში მოგვდის peer-ების სია რომელსაც PeerListListener-ით ვუსმენთ და ცვლილებისას MutableLiveData<Collection<WifiP2pDevice>>-ს ვანახლებთ ახალი სიით. განახლებული სიის მიღების შემდეგ ვამოწმებთ რომელიმე peer-თან გვაქვს თუ არა კავშირი. თუ გვაქვს გადავდივართ ჩატში თუ არა - ვაჩვენებთ peer-ების სიას MainFragment-ში. რომელიმე peer-ის მონიშვნის შემთხვევაში ვიღებთ შესაბამის ინდექსზე მდებარე WifiP2pDevice-ს და ვცდილობთ მასთან დაგაკვშირებას. თუ წარმატებულად დავუკავშირდით WifiBroadcastReceiver გვამცნობს კავშირის შესახებ connectionInfoListener-ში. connectionInfoListener-ის onConnectionInfoAvailable-ში სანამ ახალ კავშირს გავხსნით ყველა გამოსაყენებელ სოკეტს ვხურავთ რომ თავიდან ავიცილოთ დაკავებული პორტის გამოყენება. შემდეგ ვამოწმებთ ვინ არის groupOwner და მის მხარეს ვსტარტავთ ServerSideThread, ხოლო მეორე შემთხვევაში ClientSideThread-ს. თავის მხრივ ორივე სტარტავს sendAndReceive ნაკადს. ეს 3 მარტივი კლასი არის პასუხისმგებელი კომუნიკაციაზე. 
